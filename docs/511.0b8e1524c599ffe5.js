"use strict";(self.webpackChunktbs=self.webpackChunktbs||[]).push([[511],{511:(rt,V,x)=>{x.r(V),x.d(V,{line_chart:()=>T});var D=x(872),W=x(555),f=x(546);function R(t){this._context=t}function I(t){return new R(t)}function j(t){return t[0]}function N(t){return t[1]}function Y(t,n){let e;if(void 0===n)for(const r of t)null!=r&&(e<r||void 0===e&&r>=r)&&(e=r);else{let r=-1;for(let a of t)null!=(a=n(a,++r,t))&&(e<a||void 0===e&&a>=a)&&(e=a)}return e}function J(t){return t}R.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};var z=1e-6;function X(t){return"translate("+t+",0)"}function G(t){return"translate(0,"+t+")"}function Q(t){return n=>+t(n)}function Z(t,n){return n=Math.max(0,t.bandwidth()-2*n)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function q(){return!this.__axis}function F(t,n){var e=[],r=null,a=null,i=6,c=6,l=3,u="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,h=1===t||4===t?-1:1,g=4===t||2===t?"x":"y",m=1===t||3===t?X:G;function o(s){var it=null==r?n.ticks?n.ticks.apply(n,e):n.domain():r,et=null==a?n.tickFormat?n.tickFormat.apply(n,e):J:a,B=Math.max(i,0)+l,H=n.range(),w=+H[0]+u,C=+H[H.length-1]+u,E=(n.bandwidth?Z:Q)(n.copy(),u),b=s.selection?s.selection():s,k=b.selectAll(".domain").data([null]),d=b.selectAll(".tick").data(it,n).order(),L=d.exit(),v=d.enter().append("g").attr("class","tick"),_=d.select("line"),A=d.select("text");k=k.merge(k.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),d=d.merge(v),_=_.merge(v.append("line").attr("stroke","currentColor").attr(g+"2",h*i)),A=A.merge(v.append("text").attr("fill","currentColor").attr(g,h*B).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),s!==b&&(k=k.transition(s),d=d.transition(s),_=_.transition(s),A=A.transition(s),L=L.transition(s).attr("opacity",z).attr("transform",function(p){return isFinite(p=E(p))?m(p+u):this.getAttribute("transform")}),v.attr("opacity",z).attr("transform",function(p){var M=this.parentNode.__axis;return m((M&&isFinite(M=M(p))?M:E(p))+u)})),L.remove(),k.attr("d",4===t||2===t?c?"M"+h*c+","+w+"H"+u+"V"+C+"H"+h*c:"M"+u+","+w+"V"+C:c?"M"+w+","+h*c+"V"+u+"H"+C+"V"+h*c:"M"+w+","+u+"H"+C),d.attr("opacity",1).attr("transform",function(p){return m(E(p)+u)}),_.attr(g+"2",h*i),A.attr(g,h*B).text(et),b.filter(q).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),b.each(function(){this.__axis=E})}return o.scale=function(s){return arguments.length?(n=s,o):n},o.ticks=function(){return e=Array.from(arguments),o},o.tickArguments=function(s){return arguments.length?(e=null==s?[]:Array.from(s),o):e.slice()},o.tickValues=function(s){return arguments.length?(r=null==s?null:Array.from(s),o):r&&r.slice()},o.tickFormat=function(s){return arguments.length?(a=s,o):a},o.tickSize=function(s){return arguments.length?(i=c=+s,o):i},o.tickSizeInner=function(s){return arguments.length?(i=+s,o):i},o.tickSizeOuter=function(s){return arguments.length?(c=+s,o):c},o.tickPadding=function(s){return arguments.length?(l=+s,o):l},o.offset=function(s){return arguments.length?(u=+s,o):u},o}const T=class{constructor(t){(0,D.r)(this,t),this.width=500,this.height=250,this.data="[]",this.initData()}initData(){this.chartData="object"==typeof this.data?this.data:JSON.parse(this.data),console.log(this.chartData)}componentDidLoad(){console.log(this.element.shadowRoot.firstChild),this.width=this.element.shadowRoot.firstElementChild.clientWidth-40,this.calculateDrawArea();const t=(0,f.s)(this.element.shadowRoot.querySelectorAll(".chart")[0]).attr("viewBox",`0 0 ${this.width} ${this.height}`);this.buildChartV2(t)}calculateDrawArea(){this.margin={top:20,right:20,bottom:50,left:50},this.chartWidth=this.width-this.margin.left-this.margin.right,this.chartHeight=this.height-this.margin.top-this.margin.bottom}buildChartV2(t){const n=t.append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),e=(0,W.d)().domain(function U(t,n){let e,r;if(void 0===n)for(const a of t)null!=a&&(void 0===e?a>=a&&(e=r=a):(e>a&&(e=a),r<a&&(r=a)));else{let a=-1;for(let i of t)null!=(i=n(i,++a,t))&&(void 0===e?i>=i&&(e=r=i):(e>i&&(e=i),r<i&&(r=i)))}return[e,r]}(this.chartData,i=>i.x)).range([0,this.chartWidth]),r=(0,W.d)().domain([0,Y(this.chartData,i=>+i.y)]).range([this.chartHeight,0]);t.append("text").attr("x",this.chartWidth/2).attr("y",this.height).attr("class","axis-label").attr("transform","translate(0,-5)").text("Year"),t.append("text").attr("transform","translate(10,"+this.chartHeight/2+")rotate(-90)").attr("class","axis-label").text("Classes"),n.append("g").attr("class","xAxis").attr("transform","translate(0,"+this.chartHeight+")").call(function $(t){return F(3,t)}(e).ticks(this.chartData.length)),n.append("g").attr("class","yAxis").call(function tt(t){return F(4,t)}(r).ticks(this.chartData.length)),n.selectAll("g.yAxis g.tick").append("line").attr("class","gridline").attr("x1",0).attr("y1",0).attr("x2",this.chartWidth).attr("y2",0),t.append("g").selectAll("dot").data(this.chartData).enter().append("circle").attr("cx",function(i){return e(i.x)}).attr("cy",function(i){return r(i.y)}).attr("r",3).attr("transform","translate("+this.margin.bottom+","+this.margin.right+")").style("fill","#111e7f");const a=function K(t,n){var e=(0,f.c)(!0),r=null,a=I,i=null;function c(l){var u,g,o,h=(l=(0,f.a)(l)).length,m=!1;for(null==r&&(i=a(o=(0,f.p)())),u=0;u<=h;++u)!(u<h&&e(g=l[u],u,l))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+t(g,u,l),+n(g,u,l));if(o)return i=null,o+""||null}return t="function"==typeof t?t:void 0===t?j:(0,f.c)(t),n="function"==typeof n?n:void 0===n?N:(0,f.c)(n),c.x=function(l){return arguments.length?(t="function"==typeof l?l:(0,f.c)(+l),c):t},c.y=function(l){return arguments.length?(n="function"==typeof l?l:(0,f.c)(+l),c):n},c.defined=function(l){return arguments.length?(e="function"==typeof l?l:(0,f.c)(!!l),c):e},c.curve=function(l){return arguments.length?(a=l,null!=r&&(i=a(r)),c):a},c.context=function(l){return arguments.length?(null==l?r=i=null:i=a(r=l),c):r},c}().x(function(i){return e(i.x)}).y(function(i){return r(i.y)});t.append("path").datum(this.chartData).attr("class","line").attr("transform","translate("+this.margin.bottom+","+this.margin.right+")").attr("d",a).style("fill","none").style("stroke","#111e7f").style("stroke-width","2")}render(){return(0,D.h)("div",null,(0,D.h)("svg",{class:"chart"}))}get element(){return(0,D.g)(this)}};T.style=":host{display:block}.domain{stroke:#cddbde;fill:none}.tick line:first-child{visibility:hidden}.gridline{stroke:#cddbde;shape-rendering:crispEdges}.axis-label{fill:black;stroke:none;text-anchor:middle;stroke:black;stroke-width:0.5}"}}]);